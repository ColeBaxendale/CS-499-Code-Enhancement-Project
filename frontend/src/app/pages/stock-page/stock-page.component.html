<!-- stock-page.component.html -->
<div class="background">
  <div class="title">
    <h1>Stock Simulator</h1>

  </div>
<!-- Search bar component -->
<app-searchbar></app-searchbar>
<button (click)="backToDashboard()">Back to Dashboard</button>

<!-- Stock Details Section -->
<div *ngIf="loadingStockData">
  <!-- Loading animation while stock data is loading -->
  <div class="loading-animation">
    <div class="dot dot1"></div>
    <div class="dot dot2"></div>
    <div class="dot dot3"></div>
  </div>
</div>

<div *ngIf="!loadingStockData" class="stock-data">
  <!-- Display stock data once loaded -->
  <h1>{{ stockData?.symbol }}</h1>
  <h2>Price: ${{ stockData?.currentPrice }}</h2>
  <h2>Previous Close Price: ${{ stockData?.previousClosePrice }}</h2>
  <h2>Opening Price: ${{ stockData?.openingPrice }}</h2>
  <h2>High Price: ${{ stockData?.highPrice }}</h2>
  <h2>Low Price: ${{ stockData?.lowPrice }}</h2>
  <h2>Volume: ${{ stockData?.volume }}</h2>
  <h2>Change Percentage: ${{ stockData?.change_percentage }}%</h2>
  <!-- Button to buy stock -->

</div>
<div *ngIf="!loadingStockData">
  <button (click)="buyStock(stockData?.symbol,stockData?.currentPrice)">Buy Stock</button>

</div>

<!-- Stock News Section -->
<div *ngIf="stockNews.length > 0" class="stock-news">
  <h1>Latest News</h1>
  <div *ngIf="loadingNewsData">
    <!-- Loading animation while news data is loading -->
    <div class="loading-animation">
      <div class="dot dot1"></div>
      <div class="dot dot2"></div>
      <div class="dot dot3"></div>
    </div>
  </div>
  <div *ngIf="!loadingNewsData">
    <!-- Display news items -->
    <div *ngFor="let newsItem of stockNews" class="news-item">
      <img [src]="newsItem?.bannerImage" [alt]="newsItem.title" class="news-image">
      <div class="news-content">
        <a [href]="newsItem?.url" target="_blank">
          <h3>{{ newsItem?.title }}</h3>
        </a>
        <p>{{ newsItem.summary }}</p>
      </div>
    </div>
  </div>
</div>
</div>